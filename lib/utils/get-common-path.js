'use strict';

exports.__esModule = true;

exports.default = function (paths) {
    if (!paths) return null;

    if (paths.length === 1) return paths[0];

    const fragmentedPaths = paths.map(item => item.split(_path2.default.sep));
    const commonPathFragments = getCommonPathFragments(fragmentedPaths);

    if (!commonPathFragments.length) return null;

    return commonPathFragments.join(_path2.default.sep);
};

var _path = require('path');

var _path2 = _interopRequireDefault(_path);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function getCommonPathFragmentsCount(fragmentedPath1, fragmentedPath2) {
    const maxCommonPathFragmentsCount = Math.min(fragmentedPath1.length, fragmentedPath2.length);

    let commonPathFragmentsIndex = 0;

    while (commonPathFragmentsIndex < maxCommonPathFragmentsCount) {
        if (fragmentedPath1[commonPathFragmentsIndex] !== fragmentedPath2[commonPathFragmentsIndex]) break;

        commonPathFragmentsIndex++;
    }

    return commonPathFragmentsIndex;
}

function getCommonPathFragments(fragmentedPaths) {
    const lastFragmentedPath = fragmentedPaths.pop();

    const commonPathFragmentsCounts = fragmentedPaths.map(fragmentedPath => getCommonPathFragmentsCount(fragmentedPath, lastFragmentedPath));

    return lastFragmentedPath.splice(0, Math.min(...commonPathFragmentsCounts));
}

module.exports = exports['default'];
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy91dGlscy9nZXQtY29tbW9uLXBhdGguanMiXSwibmFtZXMiOlsicGF0aHMiLCJsZW5ndGgiLCJmcmFnbWVudGVkUGF0aHMiLCJtYXAiLCJpdGVtIiwic3BsaXQiLCJzZXAiLCJjb21tb25QYXRoRnJhZ21lbnRzIiwiZ2V0Q29tbW9uUGF0aEZyYWdtZW50cyIsImpvaW4iLCJnZXRDb21tb25QYXRoRnJhZ21lbnRzQ291bnQiLCJmcmFnbWVudGVkUGF0aDEiLCJmcmFnbWVudGVkUGF0aDIiLCJtYXhDb21tb25QYXRoRnJhZ21lbnRzQ291bnQiLCJNYXRoIiwibWluIiwiY29tbW9uUGF0aEZyYWdtZW50c0luZGV4IiwibGFzdEZyYWdtZW50ZWRQYXRoIiwicG9wIiwiY29tbW9uUGF0aEZyYWdtZW50c0NvdW50cyIsImZyYWdtZW50ZWRQYXRoIiwic3BsaWNlIl0sIm1hcHBpbmdzIjoiOzs7O2tCQTJCZSxVQUFVQSxLQUFWLEVBQWlCO0FBQzVCLFFBQUksQ0FBQ0EsS0FBTCxFQUNJLE9BQU8sSUFBUDs7QUFFSixRQUFJQSxNQUFNQyxNQUFOLEtBQWlCLENBQXJCLEVBQ0ksT0FBT0QsTUFBTSxDQUFOLENBQVA7O0FBRUosVUFBTUUsa0JBQXNCRixNQUFNRyxHQUFOLENBQVVDLFFBQVFBLEtBQUtDLEtBQUwsQ0FBVyxlQUFLQyxHQUFoQixDQUFsQixDQUE1QjtBQUNBLFVBQU1DLHNCQUFzQkMsdUJBQXVCTixlQUF2QixDQUE1Qjs7QUFHQSxRQUFJLENBQUNLLG9CQUFvQk4sTUFBekIsRUFDSSxPQUFPLElBQVA7O0FBRUosV0FBT00sb0JBQW9CRSxJQUFwQixDQUF5QixlQUFLSCxHQUE5QixDQUFQO0FBQ0gsQzs7QUExQ0Q7Ozs7OztBQUdBLFNBQVNJLDJCQUFULENBQXNDQyxlQUF0QyxFQUF1REMsZUFBdkQsRUFBd0U7QUFDcEUsVUFBTUMsOEJBQThCQyxLQUFLQyxHQUFMLENBQVNKLGdCQUFnQlYsTUFBekIsRUFBaUNXLGdCQUFnQlgsTUFBakQsQ0FBcEM7O0FBRUEsUUFBSWUsMkJBQTJCLENBQS9COztBQUVBLFdBQU9BLDJCQUEyQkgsMkJBQWxDLEVBQStEO0FBQzNELFlBQUlGLGdCQUFnQkssd0JBQWhCLE1BQThDSixnQkFBZ0JJLHdCQUFoQixDQUFsRCxFQUNJOztBQUVKQTtBQUNIOztBQUVELFdBQU9BLHdCQUFQO0FBQ0g7O0FBRUQsU0FBU1Isc0JBQVQsQ0FBaUNOLGVBQWpDLEVBQWtEO0FBQzlDLFVBQU1lLHFCQUFxQmYsZ0JBQWdCZ0IsR0FBaEIsRUFBM0I7O0FBRUEsVUFBTUMsNEJBQTRCakIsZ0JBQzdCQyxHQUQ2QixDQUN6QmlCLGtCQUFrQlYsNEJBQTRCVSxjQUE1QixFQUE0Q0gsa0JBQTVDLENBRE8sQ0FBbEM7O0FBR0EsV0FBT0EsbUJBQW1CSSxNQUFuQixDQUEwQixDQUExQixFQUE2QlAsS0FBS0MsR0FBTCxDQUFTLEdBQUdJLHlCQUFaLENBQTdCLENBQVA7QUFDSCIsImZpbGUiOiJ1dGlscy9nZXQtY29tbW9uLXBhdGguanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgcGF0aCBmcm9tICdwYXRoJztcblxuXG5mdW5jdGlvbiBnZXRDb21tb25QYXRoRnJhZ21lbnRzQ291bnQgKGZyYWdtZW50ZWRQYXRoMSwgZnJhZ21lbnRlZFBhdGgyKSB7XG4gICAgY29uc3QgbWF4Q29tbW9uUGF0aEZyYWdtZW50c0NvdW50ID0gTWF0aC5taW4oZnJhZ21lbnRlZFBhdGgxLmxlbmd0aCwgZnJhZ21lbnRlZFBhdGgyLmxlbmd0aCk7XG5cbiAgICBsZXQgY29tbW9uUGF0aEZyYWdtZW50c0luZGV4ID0gMDtcblxuICAgIHdoaWxlIChjb21tb25QYXRoRnJhZ21lbnRzSW5kZXggPCBtYXhDb21tb25QYXRoRnJhZ21lbnRzQ291bnQpIHtcbiAgICAgICAgaWYgKGZyYWdtZW50ZWRQYXRoMVtjb21tb25QYXRoRnJhZ21lbnRzSW5kZXhdICE9PSBmcmFnbWVudGVkUGF0aDJbY29tbW9uUGF0aEZyYWdtZW50c0luZGV4XSlcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNvbW1vblBhdGhGcmFnbWVudHNJbmRleCsrO1xuICAgIH1cblxuICAgIHJldHVybiBjb21tb25QYXRoRnJhZ21lbnRzSW5kZXg7XG59XG5cbmZ1bmN0aW9uIGdldENvbW1vblBhdGhGcmFnbWVudHMgKGZyYWdtZW50ZWRQYXRocykge1xuICAgIGNvbnN0IGxhc3RGcmFnbWVudGVkUGF0aCA9IGZyYWdtZW50ZWRQYXRocy5wb3AoKTtcblxuICAgIGNvbnN0IGNvbW1vblBhdGhGcmFnbWVudHNDb3VudHMgPSBmcmFnbWVudGVkUGF0aHNcbiAgICAgICAgLm1hcChmcmFnbWVudGVkUGF0aCA9PiBnZXRDb21tb25QYXRoRnJhZ21lbnRzQ291bnQoZnJhZ21lbnRlZFBhdGgsIGxhc3RGcmFnbWVudGVkUGF0aCkpO1xuXG4gICAgcmV0dXJuIGxhc3RGcmFnbWVudGVkUGF0aC5zcGxpY2UoMCwgTWF0aC5taW4oLi4uY29tbW9uUGF0aEZyYWdtZW50c0NvdW50cykpO1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiAocGF0aHMpIHtcbiAgICBpZiAoIXBhdGhzKVxuICAgICAgICByZXR1cm4gbnVsbDtcblxuICAgIGlmIChwYXRocy5sZW5ndGggPT09IDEpXG4gICAgICAgIHJldHVybiBwYXRoc1swXTtcblxuICAgIGNvbnN0IGZyYWdtZW50ZWRQYXRocyAgICAgPSBwYXRocy5tYXAoaXRlbSA9PiBpdGVtLnNwbGl0KHBhdGguc2VwKSk7XG4gICAgY29uc3QgY29tbW9uUGF0aEZyYWdtZW50cyA9IGdldENvbW1vblBhdGhGcmFnbWVudHMoZnJhZ21lbnRlZFBhdGhzKTtcblxuXG4gICAgaWYgKCFjb21tb25QYXRoRnJhZ21lbnRzLmxlbmd0aClcbiAgICAgICAgcmV0dXJuIG51bGw7XG5cbiAgICByZXR1cm4gY29tbW9uUGF0aEZyYWdtZW50cy5qb2luKHBhdGguc2VwKTtcbn1cbiJdfQ==
