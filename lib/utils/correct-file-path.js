'use strict';

exports.__esModule = true;

exports.default = function (filePath, expectedExtention) {
    filePath = filePath.replace(new RegExp((0, _lodash.escapeRegExp)(_path2.default.win32.sep), 'g'), _path2.default.posix.sep);

    const correctedPath = filePath.split(_path2.default.posix.sep).filter((fragment, index) => index === 0 || !!fragment).map(str => (0, _sanitizeFilename2.default)(str)).join(_path2.default.sep);

    if (!expectedExtention) return correctedPath;

    const extentionRe = new RegExp((0, _lodash.escapeRegExp)(expectedExtention));

    return extentionRe.test(correctedPath) ? correctedPath : `${correctedPath}.${expectedExtention}`;
};

var _path = require('path');

var _path2 = _interopRequireDefault(_path);

var _sanitizeFilename = require('sanitize-filename');

var _sanitizeFilename2 = _interopRequireDefault(_sanitizeFilename);

var _lodash = require('lodash');

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

module.exports = exports['default'];
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy91dGlscy9jb3JyZWN0LWZpbGUtcGF0aC5qcyJdLCJuYW1lcyI6WyJmaWxlUGF0aCIsImV4cGVjdGVkRXh0ZW50aW9uIiwicmVwbGFjZSIsIlJlZ0V4cCIsIndpbjMyIiwic2VwIiwicG9zaXgiLCJjb3JyZWN0ZWRQYXRoIiwic3BsaXQiLCJmaWx0ZXIiLCJmcmFnbWVudCIsImluZGV4IiwibWFwIiwic3RyIiwiam9pbiIsImV4dGVudGlvblJlIiwidGVzdCJdLCJtYXBwaW5ncyI6Ijs7OztrQkFJZSxVQUFVQSxRQUFWLEVBQW9CQyxpQkFBcEIsRUFBdUM7QUFDbERELGVBQVdBLFNBQVNFLE9BQVQsQ0FBaUIsSUFBSUMsTUFBSixDQUFXLDBCQUFTLGVBQUtDLEtBQUwsQ0FBV0MsR0FBcEIsQ0FBWCxFQUFxQyxHQUFyQyxDQUFqQixFQUE0RCxlQUFLQyxLQUFMLENBQVdELEdBQXZFLENBQVg7O0FBRUEsVUFBTUUsZ0JBQWdCUCxTQUNqQlEsS0FEaUIsQ0FDWCxlQUFLRixLQUFMLENBQVdELEdBREEsRUFFakJJLE1BRmlCLENBRVYsQ0FBQ0MsUUFBRCxFQUFXQyxLQUFYLEtBQXFCQSxVQUFVLENBQVYsSUFBZSxDQUFDLENBQUNELFFBRjVCLEVBR2pCRSxHQUhpQixDQUdiQyxPQUFPLGdDQUFpQkEsR0FBakIsQ0FITSxFQUlqQkMsSUFKaUIsQ0FJWixlQUFLVCxHQUpPLENBQXRCOztBQU1BLFFBQUksQ0FBQ0osaUJBQUwsRUFDSSxPQUFPTSxhQUFQOztBQUVKLFVBQU1RLGNBQWMsSUFBSVosTUFBSixDQUFXLDBCQUFTRixpQkFBVCxDQUFYLENBQXBCOztBQUVBLFdBQU9jLFlBQVlDLElBQVosQ0FBaUJULGFBQWpCLElBQWtDQSxhQUFsQyxHQUFtRCxHQUFFQSxhQUFjLElBQUdOLGlCQUFrQixFQUEvRjtBQUNILEM7O0FBbkJEOzs7O0FBQ0E7Ozs7QUFDQSIsImZpbGUiOiJ1dGlscy9jb3JyZWN0LWZpbGUtcGF0aC5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBwYXRoIGZyb20gJ3BhdGgnO1xuaW1wb3J0IHNhbml0aXplRmlsZW5hbWUgZnJvbSAnc2FuaXRpemUtZmlsZW5hbWUnO1xuaW1wb3J0IHsgZXNjYXBlUmVnRXhwIGFzIGVzY2FwZVJlIH0gZnJvbSAnbG9kYXNoJztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gKGZpbGVQYXRoLCBleHBlY3RlZEV4dGVudGlvbikge1xuICAgIGZpbGVQYXRoID0gZmlsZVBhdGgucmVwbGFjZShuZXcgUmVnRXhwKGVzY2FwZVJlKHBhdGgud2luMzIuc2VwKSwgJ2cnKSwgcGF0aC5wb3NpeC5zZXApO1xuXG4gICAgY29uc3QgY29ycmVjdGVkUGF0aCA9IGZpbGVQYXRoXG4gICAgICAgIC5zcGxpdChwYXRoLnBvc2l4LnNlcClcbiAgICAgICAgLmZpbHRlcigoZnJhZ21lbnQsIGluZGV4KSA9PiBpbmRleCA9PT0gMCB8fCAhIWZyYWdtZW50KVxuICAgICAgICAubWFwKHN0ciA9PiBzYW5pdGl6ZUZpbGVuYW1lKHN0cikpXG4gICAgICAgIC5qb2luKHBhdGguc2VwKTtcblxuICAgIGlmICghZXhwZWN0ZWRFeHRlbnRpb24pXG4gICAgICAgIHJldHVybiBjb3JyZWN0ZWRQYXRoO1xuXG4gICAgY29uc3QgZXh0ZW50aW9uUmUgPSBuZXcgUmVnRXhwKGVzY2FwZVJlKGV4cGVjdGVkRXh0ZW50aW9uKSk7XG5cbiAgICByZXR1cm4gZXh0ZW50aW9uUmUudGVzdChjb3JyZWN0ZWRQYXRoKSA/IGNvcnJlY3RlZFBhdGggOiBgJHtjb3JyZWN0ZWRQYXRofS4ke2V4cGVjdGVkRXh0ZW50aW9ufWA7XG59XG4iXX0=
