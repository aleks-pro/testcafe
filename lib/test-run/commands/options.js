'use strict';

exports.__esModule = true;
exports.AssertionOptions = exports.ResizeToFitDeviceOptions = exports.DragToElementOptions = exports.TypeOptions = exports.MoveOptions = exports.ClickOptions = exports.MouseOptions = exports.ElementScreenshotOptions = exports.ScrollOptions = exports.OffsetOptions = exports.ActionOptions = exports.speedOption = exports.booleanOption = exports.positiveIntegerOption = exports.integerOption = undefined;

var _assignable = require('../../utils/assignable');

var _assignable2 = _interopRequireDefault(_assignable);

var _factories = require('./validations/factories');

var _testRun = require('../../errors/test-run');

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

const integerOption = exports.integerOption = (0, _factories.createIntegerValidator)(_testRun.ActionIntegerOptionError); // -------------------------------------------------------------
// WARNING: this file is used by both the client and the server.
// Do not use any browser or node-specific API!
// -------------------------------------------------------------

const positiveIntegerOption = exports.positiveIntegerOption = (0, _factories.createPositiveIntegerValidator)(_testRun.ActionPositiveIntegerOptionError);
const booleanOption = exports.booleanOption = (0, _factories.createBooleanValidator)(_testRun.ActionBooleanOptionError);
const speedOption = exports.speedOption = (0, _factories.createSpeedValidator)(_testRun.ActionSpeedOptionError);

// Acitons
class ActionOptions extends _assignable2.default {
    constructor(obj, validate) {
        super();

        this.speed = null;

        this._assignFrom(obj, validate);
    }

    _getAssignableProperties() {
        return [{ name: 'speed', type: speedOption }];
    }
}

exports.ActionOptions = ActionOptions; // Offset

class OffsetOptions extends ActionOptions {
    constructor(obj, validate) {
        super();

        this.offsetX = null;
        this.offsetY = null;

        this._assignFrom(obj, validate);
    }

    _getAssignableProperties() {
        return super._getAssignableProperties().concat([{ name: 'offsetX', type: integerOption }, { name: 'offsetY', type: integerOption }]);
    }
}

exports.OffsetOptions = OffsetOptions;
class ScrollOptions extends OffsetOptions {
    constructor(obj, validate) {
        super();

        this.scrollToCenter = false;
        this.skipParentFrames = false;

        this._assignFrom(obj, validate);
    }

    _getAssignableProperties() {
        return super._getAssignableProperties().concat([{ name: 'scrollToCenter', type: booleanOption }, { name: 'skipParentFrames', type: booleanOption }]);
    }
}

exports.ScrollOptions = ScrollOptions; // Element Screenshot

class ElementScreenshotOptions extends ActionOptions {
    constructor(obj, validate) {
        super();

        this.scrollTargetX = null;
        this.scrollTargetY = null;
        this.includeMargins = false;
        this.includeBorders = true;
        this.includePaddings = true;

        this.crop = {
            left: null,
            right: null,
            top: null,
            bottom: null
        };

        this._assignFrom(obj, validate);
    }

    _getAssignableProperties() {
        return super._getAssignableProperties().concat([{ name: 'scrollTargetX', type: integerOption }, { name: 'scrollTargetY', type: integerOption }, { name: 'crop.left', type: integerOption }, { name: 'crop.right', type: integerOption }, { name: 'crop.top', type: integerOption }, { name: 'crop.bottom', type: integerOption }, { name: 'includeMargins', type: booleanOption }, { name: 'includeBorders', type: booleanOption }, { name: 'includePaddings', type: booleanOption }]);
    }
}

exports.ElementScreenshotOptions = ElementScreenshotOptions; // Mouse

class MouseOptions extends OffsetOptions {
    constructor(obj, validate) {
        super();

        this.modifiers = {
            ctrl: false,
            alt: false,
            shift: false,
            meta: false
        };

        this._assignFrom(obj, validate);
    }

    _getAssignableProperties() {
        return super._getAssignableProperties().concat([{ name: 'modifiers.ctrl', type: booleanOption }, { name: 'modifiers.alt', type: booleanOption }, { name: 'modifiers.shift', type: booleanOption }, { name: 'modifiers.meta', type: booleanOption }]);
    }
}

exports.MouseOptions = MouseOptions; // Click

class ClickOptions extends MouseOptions {
    constructor(obj, validate) {
        super();

        this.caretPos = null;

        this._assignFrom(obj, validate);
    }

    _getAssignableProperties() {
        return super._getAssignableProperties().concat([{ name: 'caretPos', type: positiveIntegerOption }]);
    }
}

exports.ClickOptions = ClickOptions; // Move

class MoveOptions extends MouseOptions {
    constructor(obj, validate) {
        super();

        this.speed = null;
        this.minMovingTime = null;
        this.holdLeftButton = false;
        this.skipScrolling = false;
        this.skipDefaultDragBehavior = false;

        this._assignFrom(obj, validate);
    }

    _getAssignableProperties() {
        return super._getAssignableProperties().concat([{ name: 'speed' }, { name: 'minMovingTime' }, { name: 'holdLeftButton' }, { name: 'skipScrolling', type: booleanOption }, { name: 'skipDefaultDragBehavior', type: booleanOption }]);
    }
}

exports.MoveOptions = MoveOptions; // Type

class TypeOptions extends ClickOptions {
    constructor(obj, validate) {
        super();

        this.replace = false;
        this.paste = false;

        this._assignFrom(obj, validate);
    }

    _getAssignableProperties() {
        return super._getAssignableProperties().concat([{ name: 'replace', type: booleanOption }, { name: 'paste', type: booleanOption }]);
    }
}

exports.TypeOptions = TypeOptions; // DragToElement

class DragToElementOptions extends MouseOptions {
    constructor(obj, validate) {
        super(obj, validate);

        this.destinationOffsetX = null;
        this.destinationOffsetY = null;

        this._assignFrom(obj, validate);
    }

    _getAssignableProperties() {
        return super._getAssignableProperties().concat([{ name: 'destinationOffsetX', type: integerOption }, { name: 'destinationOffsetY', type: integerOption }]);
    }
}

exports.DragToElementOptions = DragToElementOptions; //ResizeToFitDevice

class ResizeToFitDeviceOptions extends _assignable2.default {
    constructor(obj, validate) {
        super();

        this.portraitOrientation = false;

        this._assignFrom(obj, validate);
    }

    _getAssignableProperties() {
        return [{ name: 'portraitOrientation', type: booleanOption }];
    }
}

exports.ResizeToFitDeviceOptions = ResizeToFitDeviceOptions; //Assertion

class AssertionOptions extends _assignable2.default {
    constructor(obj, validate) {
        super();

        this.timeout = void 0;
        this.allowUnawaitedPromise = false;

        this._assignFrom(obj, validate);
    }

    _getAssignableProperties() {
        return [{ name: 'timeout', type: positiveIntegerOption }, { name: 'allowUnawaitedPromise', type: booleanOption }];
    }
}
exports.AssertionOptions = AssertionOptions;
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy90ZXN0LXJ1bi9jb21tYW5kcy9vcHRpb25zLmpzIl0sIm5hbWVzIjpbImludGVnZXJPcHRpb24iLCJwb3NpdGl2ZUludGVnZXJPcHRpb24iLCJib29sZWFuT3B0aW9uIiwic3BlZWRPcHRpb24iLCJBY3Rpb25PcHRpb25zIiwiY29uc3RydWN0b3IiLCJvYmoiLCJ2YWxpZGF0ZSIsInNwZWVkIiwiX2Fzc2lnbkZyb20iLCJfZ2V0QXNzaWduYWJsZVByb3BlcnRpZXMiLCJuYW1lIiwidHlwZSIsIk9mZnNldE9wdGlvbnMiLCJvZmZzZXRYIiwib2Zmc2V0WSIsImNvbmNhdCIsIlNjcm9sbE9wdGlvbnMiLCJzY3JvbGxUb0NlbnRlciIsInNraXBQYXJlbnRGcmFtZXMiLCJFbGVtZW50U2NyZWVuc2hvdE9wdGlvbnMiLCJzY3JvbGxUYXJnZXRYIiwic2Nyb2xsVGFyZ2V0WSIsImluY2x1ZGVNYXJnaW5zIiwiaW5jbHVkZUJvcmRlcnMiLCJpbmNsdWRlUGFkZGluZ3MiLCJjcm9wIiwibGVmdCIsInJpZ2h0IiwidG9wIiwiYm90dG9tIiwiTW91c2VPcHRpb25zIiwibW9kaWZpZXJzIiwiY3RybCIsImFsdCIsInNoaWZ0IiwibWV0YSIsIkNsaWNrT3B0aW9ucyIsImNhcmV0UG9zIiwiTW92ZU9wdGlvbnMiLCJtaW5Nb3ZpbmdUaW1lIiwiaG9sZExlZnRCdXR0b24iLCJza2lwU2Nyb2xsaW5nIiwic2tpcERlZmF1bHREcmFnQmVoYXZpb3IiLCJUeXBlT3B0aW9ucyIsInJlcGxhY2UiLCJwYXN0ZSIsIkRyYWdUb0VsZW1lbnRPcHRpb25zIiwiZGVzdGluYXRpb25PZmZzZXRYIiwiZGVzdGluYXRpb25PZmZzZXRZIiwiUmVzaXplVG9GaXREZXZpY2VPcHRpb25zIiwicG9ydHJhaXRPcmllbnRhdGlvbiIsIkFzc2VydGlvbk9wdGlvbnMiLCJ0aW1lb3V0IiwiYWxsb3dVbmF3YWl0ZWRQcm9taXNlIl0sIm1hcHBpbmdzIjoiOzs7OztBQUtBOzs7O0FB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O0FBQ08sTUFBTUUsZ0JBQU4sOEJBQTBDO0FBQzdDL0MsZ0JBQWFDLEdBQWIsRUFBa0JDLFFBQWxCLEVBQTRCO0FBQ3hCOztBQUVBLGFBQUs4QyxPQUFMLEdBQTZCLEtBQUssQ0FBbEM7QUFDQSxhQUFLQyxxQkFBTCxHQUE2QixLQUE3Qjs7QUFFQSxhQUFLN0MsV0FBTCxDQUFpQkgsR0FBakIsRUFBc0JDLFFBQXRCO0FBQ0g7O0FBRURHLCtCQUE0QjtBQUN4QixlQUFPLENBQ0gsRUFBRUMsTUFBTSxTQUFSLEVBQW1CQyxNQUFNWCxxQkFBekIsRUFERyxFQUVILEVBQUVVLE1BQU0sdUJBQVIsRUFBaUNDLE1BQU1WLGFBQXZDLEVBRkcsQ0FBUDtBQUlIO0FBZjRDO1FBQXBDa0QsZ0IsR0FBQUEsZ0IiLCJmaWxlIjoidGVzdC1ydW4vY29tbWFuZHMvb3B0aW9ucy5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIFdBUk5JTkc6IHRoaXMgZmlsZSBpcyB1c2VkIGJ5IGJvdGggdGhlIGNsaWVudCBhbmQgdGhlIHNlcnZlci5cbi8vIERvIG5vdCB1c2UgYW55IGJyb3dzZXIgb3Igbm9kZS1zcGVjaWZpYyBBUEkhXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbmltcG9ydCBBc3NpZ25hYmxlIGZyb20gJy4uLy4uL3V0aWxzL2Fzc2lnbmFibGUnO1xuaW1wb3J0IHtcbiAgICBjcmVhdGVCb29sZWFuVmFsaWRhdG9yLFxuICAgIGNyZWF0ZUludGVnZXJWYWxpZGF0b3IsXG4gICAgY3JlYXRlUG9zaXRpdmVJbnRlZ2VyVmFsaWRhdG9yLFxuICAgIGNyZWF0ZVNwZWVkVmFsaWRhdG9yXG59IGZyb20gJy4vdmFsaWRhdGlvbnMvZmFjdG9yaWVzJztcbmltcG9ydCB7XG4gICAgQWN0aW9uSW50ZWdlck9wdGlvbkVycm9yLFxuICAgIEFjdGlvblBvc2l0aXZlSW50ZWdlck9wdGlvbkVycm9yLFxuICAgIEFjdGlvbkJvb2xlYW5PcHRpb25FcnJvcixcbiAgICBBY3Rpb25TcGVlZE9wdGlvbkVycm9yXG59IGZyb20gJy4uLy4uL2Vycm9ycy90ZXN0LXJ1bic7XG5cbmV4cG9ydCBjb25zdCBpbnRlZ2VyT3B0aW9uICAgICAgICAgPSBjcmVhdGVJbnRlZ2VyVmFsaWRhdG9yKEFjdGlvbkludGVnZXJPcHRpb25FcnJvcik7XG5leHBvcnQgY29uc3QgcG9zaXRpdmVJbnRlZ2VyT3B0aW9uID0gY3JlYXRlUG9zaXRpdmVJbnRlZ2VyVmFsaWRhdG9yKEFjdGlvblBvc2l0aXZlSW50ZWdlck9wdGlvbkVycm9yKTtcbmV4cG9ydCBjb25zdCBib29sZWFuT3B0aW9uICAgICAgICAgPSBjcmVhdGVCb29sZWFuVmFsaWRhdG9yKEFjdGlvbkJvb2xlYW5PcHRpb25FcnJvcik7XG5leHBvcnQgY29uc3Qgc3BlZWRPcHRpb24gICAgICAgICAgID0gY3JlYXRlU3BlZWRWYWxpZGF0b3IoQWN0aW9uU3BlZWRPcHRpb25FcnJvcik7XG5cblxuLy8gQWNpdG9uc1xuZXhwb3J0IGNsYXNzIEFjdGlvbk9wdGlvbnMgZXh0ZW5kcyBBc3NpZ25hYmxlIHtcbiAgICBjb25zdHJ1Y3RvciAob2JqLCB2YWxpZGF0ZSkge1xuICAgICAgICBzdXBlcigpO1xuXG4gICAgICAgIHRoaXMuc3BlZWQgPSBudWxsO1xuXG4gICAgICAgIHRoaXMuX2Fzc2lnbkZyb20ob2JqLCB2YWxpZGF0ZSk7XG4gICAgfVxuXG4gICAgX2dldEFzc2lnbmFibGVQcm9wZXJ0aWVzICgpIHtcbiAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgIHsgbmFtZTogJ3NwZWVkJywgdHlwZTogc3BlZWRPcHRpb24gfVxuICAgICAgICBdO1xuICAgIH1cbn1cblxuLy8gT2Zmc2V0XG5leHBvcnQgY2xhc3MgT2Zmc2V0T3B0aW9ucyBleHRlbmRzIEFjdGlvbk9wdGlvbnMge1xuICAgIGNvbnN0cnVjdG9yIChvYmosIHZhbGlkYXRlKSB7XG4gICAgICAgIHN1cGVyKCk7XG5cbiAgICAgICAgdGhpcy5vZmZzZXRYID0gbnVsbDtcbiAgICAgICAgdGhpcy5vZmZzZXRZID0gbnVsbDtcblxuICAgICAgICB0aGlzLl9hc3NpZ25Gcm9tKG9iaiwgdmFsaWRhdGUpO1xuICAgIH1cblxuICAgIF9nZXRBc3NpZ25hYmxlUHJvcGVydGllcyAoKSB7XG4gICAgICAgIHJldHVybiBzdXBlci5fZ2V0QXNzaWduYWJsZVByb3BlcnRpZXMoKS5jb25jYXQoW1xuICAgICAgICAgICAgeyBuYW1lOiAnb2Zmc2V0WCcsIHR5cGU6IGludGVnZXJPcHRpb24gfSxcbiAgICAgICAgICAgIHsgbmFtZTogJ29mZnNldFknLCB0eXBlOiBpbnRlZ2VyT3B0aW9uIH1cbiAgICAgICAgXSk7XG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgU2Nyb2xsT3B0aW9ucyBleHRlbmRzIE9mZnNldE9wdGlvbnMge1xuICAgIGNvbnN0cnVjdG9yIChvYmosIHZhbGlkYXRlKSB7XG4gICAgICAgIHN1cGVyKCk7XG5cbiAgICAgICAgdGhpcy5zY3JvbGxUb0NlbnRlciAgID0gZmFsc2U7XG4gICAgICAgIHRoaXMuc2tpcFBhcmVudEZyYW1lcyA9IGZhbHNlO1xuXG4gICAgICAgIHRoaXMuX2Fzc2lnbkZyb20ob2JqLCB2YWxpZGF0ZSk7XG4gICAgfVxuXG4gICAgX2dldEFzc2lnbmFibGVQcm9wZXJ0aWVzICgpIHtcbiAgICAgICAgcmV0dXJuIHN1cGVyLl9nZXRBc3NpZ25hYmxlUHJvcGVydGllcygpLmNvbmNhdChbXG4gICAgICAgICAgICB7IG5hbWU6ICdzY3JvbGxUb0NlbnRlcicsIHR5cGU6IGJvb2xlYW5PcHRpb24gfSxcbiAgICAgICAgICAgIHsgbmFtZTogJ3NraXBQYXJlbnRGcmFtZXMnLCB0eXBlOiBib29sZWFuT3B0aW9uIH1cbiAgICAgICAgXSk7XG4gICAgfVxufVxuXG4vLyBFbGVtZW50IFNjcmVlbnNob3RcbmV4cG9ydCBjbGFzcyBFbGVtZW50U2NyZWVuc2hvdE9wdGlvbnMgZXh0ZW5kcyBBY3Rpb25PcHRpb25zIHtcbiAgICBjb25zdHJ1Y3RvciAob2JqLCB2YWxpZGF0ZSkge1xuICAgICAgICBzdXBlcigpO1xuXG4gICAgICAgIHRoaXMuc2Nyb2xsVGFyZ2V0WCAgID0gbnVsbDtcbiAgICAgICAgdGhpcy5zY3JvbGxUYXJnZXRZICAgPSBudWxsO1xuICAgICAgICB0aGlzLmluY2x1ZGVNYXJnaW5zICA9IGZhbHNlO1xuICAgICAgICB0aGlzLmluY2x1ZGVCb3JkZXJzICA9IHRydWU7XG4gICAgICAgIHRoaXMuaW5jbHVkZVBhZGRpbmdzID0gdHJ1ZTtcblxuICAgICAgICB0aGlzLmNyb3AgPSB7XG4gICAgICAgICAgICBsZWZ0OiAgIG51bGwsXG4gICAgICAgICAgICByaWdodDogIG51bGwsXG4gICAgICAgICAgICB0b3A6ICAgIG51bGwsXG4gICAgICAgICAgICBib3R0b206IG51bGxcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLl9hc3NpZ25Gcm9tKG9iaiwgdmFsaWRhdGUpO1xuICAgIH1cblxuICAgIF9nZXRBc3NpZ25hYmxlUHJvcGVydGllcyAoKSB7XG4gICAgICAgIHJldHVybiBzdXBlci5fZ2V0QXNzaWduYWJsZVByb3BlcnRpZXMoKS5jb25jYXQoW1xuICAgICAgICAgICAgeyBuYW1lOiAnc2Nyb2xsVGFyZ2V0WCcsIHR5cGU6IGludGVnZXJPcHRpb24gfSxcbiAgICAgICAgICAgIHsgbmFtZTogJ3Njcm9sbFRhcmdldFknLCB0eXBlOiBpbnRlZ2VyT3B0aW9uIH0sXG4gICAgICAgICAgICB7IG5hbWU6ICdjcm9wLmxlZnQnLCB0eXBlOiBpbnRlZ2VyT3B0aW9uIH0sXG4gICAgICAgICAgICB7IG5hbWU6ICdjcm9wLnJpZ2h0JywgdHlwZTogaW50ZWdlck9wdGlvbiB9LFxuICAgICAgICAgICAgeyBuYW1lOiAnY3JvcC50b3AnLCB0eXBlOiBpbnRlZ2VyT3B0aW9uIH0sXG4gICAgICAgICAgICB7IG5hbWU6ICdjcm9wLmJvdHRvbScsIHR5cGU6IGludGVnZXJPcHRpb24gfSxcbiAgICAgICAgICAgIHsgbmFtZTogJ2luY2x1ZGVNYXJnaW5zJywgdHlwZTogYm9vbGVhbk9wdGlvbiB9LFxuICAgICAgICAgICAgeyBuYW1lOiAnaW5jbHVkZUJvcmRlcnMnLCB0eXBlOiBib29sZWFuT3B0aW9uIH0sXG4gICAgICAgICAgICB7IG5hbWU6ICdpbmNsdWRlUGFkZGluZ3MnLCB0eXBlOiBib29sZWFuT3B0aW9uIH1cbiAgICAgICAgXSk7XG4gICAgfVxufVxuXG4vLyBNb3VzZVxuZXhwb3J0IGNsYXNzIE1vdXNlT3B0aW9ucyBleHRlbmRzIE9mZnNldE9wdGlvbnMge1xuICAgIGNvbnN0cnVjdG9yIChvYmosIHZhbGlkYXRlKSB7XG4gICAgICAgIHN1cGVyKCk7XG5cbiAgICAgICAgdGhpcy5tb2RpZmllcnMgPSB7XG4gICAgICAgICAgICBjdHJsOiAgZmFsc2UsXG4gICAgICAgICAgICBhbHQ6ICAgZmFsc2UsXG4gICAgICAgICAgICBzaGlmdDogZmFsc2UsXG4gICAgICAgICAgICBtZXRhOiAgZmFsc2VcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLl9hc3NpZ25Gcm9tKG9iaiwgdmFsaWRhdGUpO1xuICAgIH1cblxuICAgIF9nZXRBc3NpZ25hYmxlUHJvcGVydGllcyAoKSB7XG4gICAgICAgIHJldHVybiBzdXBlci5fZ2V0QXNzaWduYWJsZVByb3BlcnRpZXMoKS5jb25jYXQoW1xuICAgICAgICAgICAgeyBuYW1lOiAnbW9kaWZpZXJzLmN0cmwnLCB0eXBlOiBib29sZWFuT3B0aW9uIH0sXG4gICAgICAgICAgICB7IG5hbWU6ICdtb2RpZmllcnMuYWx0JywgdHlwZTogYm9vbGVhbk9wdGlvbiB9LFxuICAgICAgICAgICAgeyBuYW1lOiAnbW9kaWZpZXJzLnNoaWZ0JywgdHlwZTogYm9vbGVhbk9wdGlvbiB9LFxuICAgICAgICAgICAgeyBuYW1lOiAnbW9kaWZpZXJzLm1ldGEnLCB0eXBlOiBib29sZWFuT3B0aW9uIH1cbiAgICAgICAgXSk7XG4gICAgfVxufVxuXG5cbi8vIENsaWNrXG5leHBvcnQgY2xhc3MgQ2xpY2tPcHRpb25zIGV4dGVuZHMgTW91c2VPcHRpb25zIHtcbiAgICBjb25zdHJ1Y3RvciAob2JqLCB2YWxpZGF0ZSkge1xuICAgICAgICBzdXBlcigpO1xuXG4gICAgICAgIHRoaXMuY2FyZXRQb3MgPSBudWxsO1xuXG4gICAgICAgIHRoaXMuX2Fzc2lnbkZyb20ob2JqLCB2YWxpZGF0ZSk7XG4gICAgfVxuXG4gICAgX2dldEFzc2lnbmFibGVQcm9wZXJ0aWVzICgpIHtcbiAgICAgICAgcmV0dXJuIHN1cGVyLl9nZXRBc3NpZ25hYmxlUHJvcGVydGllcygpLmNvbmNhdChbXG4gICAgICAgICAgICB7IG5hbWU6ICdjYXJldFBvcycsIHR5cGU6IHBvc2l0aXZlSW50ZWdlck9wdGlvbiB9XG4gICAgICAgIF0pO1xuICAgIH1cbn1cblxuLy8gTW92ZVxuZXhwb3J0IGNsYXNzIE1vdmVPcHRpb25zIGV4dGVuZHMgTW91c2VPcHRpb25zIHtcbiAgICBjb25zdHJ1Y3RvciAob2JqLCB2YWxpZGF0ZSkge1xuICAgICAgICBzdXBlcigpO1xuXG4gICAgICAgIHRoaXMuc3BlZWQgICAgICAgICAgICAgICAgICAgPSBudWxsO1xuICAgICAgICB0aGlzLm1pbk1vdmluZ1RpbWUgICAgICAgICAgID0gbnVsbDtcbiAgICAgICAgdGhpcy5ob2xkTGVmdEJ1dHRvbiAgICAgICAgICA9IGZhbHNlO1xuICAgICAgICB0aGlzLnNraXBTY3JvbGxpbmcgICAgICAgICAgID0gZmFsc2U7XG4gICAgICAgIHRoaXMuc2tpcERlZmF1bHREcmFnQmVoYXZpb3IgPSBmYWxzZTtcblxuICAgICAgICB0aGlzLl9hc3NpZ25Gcm9tKG9iaiwgdmFsaWRhdGUpO1xuICAgIH1cblxuICAgIF9nZXRBc3NpZ25hYmxlUHJvcGVydGllcyAoKSB7XG4gICAgICAgIHJldHVybiBzdXBlci5fZ2V0QXNzaWduYWJsZVByb3BlcnRpZXMoKS5jb25jYXQoW1xuICAgICAgICAgICAgeyBuYW1lOiAnc3BlZWQnIH0sXG4gICAgICAgICAgICB7IG5hbWU6ICdtaW5Nb3ZpbmdUaW1lJyB9LFxuICAgICAgICAgICAgeyBuYW1lOiAnaG9sZExlZnRCdXR0b24nIH0sXG4gICAgICAgICAgICB7IG5hbWU6ICdza2lwU2Nyb2xsaW5nJywgdHlwZTogYm9vbGVhbk9wdGlvbiB9LFxuICAgICAgICAgICAgeyBuYW1lOiAnc2tpcERlZmF1bHREcmFnQmVoYXZpb3InLCB0eXBlOiBib29sZWFuT3B0aW9uIH1cbiAgICAgICAgXSk7XG4gICAgfVxufVxuXG4vLyBUeXBlXG5leHBvcnQgY2xhc3MgVHlwZU9wdGlvbnMgZXh0ZW5kcyBDbGlja09wdGlvbnMge1xuICAgIGNvbnN0cnVjdG9yIChvYmosIHZhbGlkYXRlKSB7XG4gICAgICAgIHN1cGVyKCk7XG5cbiAgICAgICAgdGhpcy5yZXBsYWNlID0gZmFsc2U7XG4gICAgICAgIHRoaXMucGFzdGUgICA9IGZhbHNlO1xuXG4gICAgICAgIHRoaXMuX2Fzc2lnbkZyb20ob2JqLCB2YWxpZGF0ZSk7XG4gICAgfVxuXG4gICAgX2dldEFzc2lnbmFibGVQcm9wZXJ0aWVzICgpIHtcbiAgICAgICAgcmV0dXJuIHN1cGVyLl9nZXRBc3NpZ25hYmxlUHJvcGVydGllcygpLmNvbmNhdChbXG4gICAgICAgICAgICB7IG5hbWU6ICdyZXBsYWNlJywgdHlwZTogYm9vbGVhbk9wdGlvbiB9LFxuICAgICAgICAgICAgeyBuYW1lOiAncGFzdGUnLCB0eXBlOiBib29sZWFuT3B0aW9uIH1cbiAgICAgICAgXSk7XG4gICAgfVxufVxuXG4vLyBEcmFnVG9FbGVtZW50XG5leHBvcnQgY2xhc3MgRHJhZ1RvRWxlbWVudE9wdGlvbnMgZXh0ZW5kcyBNb3VzZU9wdGlvbnMge1xuICAgIGNvbnN0cnVjdG9yIChvYmosIHZhbGlkYXRlKSB7XG4gICAgICAgIHN1cGVyKG9iaiwgdmFsaWRhdGUpO1xuXG4gICAgICAgIHRoaXMuZGVzdGluYXRpb25PZmZzZXRYID0gbnVsbDtcbiAgICAgICAgdGhpcy5kZXN0aW5hdGlvbk9mZnNldFkgPSBudWxsO1xuXG4gICAgICAgIHRoaXMuX2Fzc2lnbkZyb20ob2JqLCB2YWxpZGF0ZSk7XG4gICAgfVxuXG4gICAgX2dldEFzc2lnbmFibGVQcm9wZXJ0aWVzICgpIHtcbiAgICAgICAgcmV0dXJuIHN1cGVyLl9nZXRBc3NpZ25hYmxlUHJvcGVydGllcygpLmNvbmNhdChbXG4gICAgICAgICAgICB7IG5hbWU6ICdkZXN0aW5hdGlvbk9mZnNldFgnLCB0eXBlOiBpbnRlZ2VyT3B0aW9uIH0sXG4gICAgICAgICAgICB7IG5hbWU6ICdkZXN0aW5hdGlvbk9mZnNldFknLCB0eXBlOiBpbnRlZ2VyT3B0aW9uIH1cbiAgICAgICAgXSk7XG4gICAgfVxufVxuXG4vL1Jlc2l6ZVRvRml0RGV2aWNlXG5leHBvcnQgY2xhc3MgUmVzaXplVG9GaXREZXZpY2VPcHRpb25zIGV4dGVuZHMgQXNzaWduYWJsZSB7XG4gICAgY29uc3RydWN0b3IgKG9iaiwgdmFsaWRhdGUpIHtcbiAgICAgICAgc3VwZXIoKTtcblxuICAgICAgICB0aGlzLnBvcnRyYWl0T3JpZW50YXRpb24gPSBmYWxzZTtcblxuICAgICAgICB0aGlzLl9hc3NpZ25Gcm9tKG9iaiwgdmFsaWRhdGUpO1xuICAgIH1cblxuICAgIF9nZXRBc3NpZ25hYmxlUHJvcGVydGllcyAoKSB7XG4gICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICB7IG5hbWU6ICdwb3J0cmFpdE9yaWVudGF0aW9uJywgdHlwZTogYm9vbGVhbk9wdGlvbiB9XG4gICAgICAgIF07XG4gICAgfVxufVxuXG4vL0Fzc2VydGlvblxuZXhwb3J0IGNsYXNzIEFzc2VydGlvbk9wdGlvbnMgZXh0ZW5kcyBBc3NpZ25hYmxlIHtcbiAgICBjb25zdHJ1Y3RvciAob2JqLCB2YWxpZGF0ZSkge1xuICAgICAgICBzdXBlcigpO1xuXG4gICAgICAgIHRoaXMudGltZW91dCAgICAgICAgICAgICAgID0gdm9pZCAwO1xuICAgICAgICB0aGlzLmFsbG93VW5hd2FpdGVkUHJvbWlzZSA9IGZhbHNlO1xuXG4gICAgICAgIHRoaXMuX2Fzc2lnbkZyb20ob2JqLCB2YWxpZGF0ZSk7XG4gICAgfVxuXG4gICAgX2dldEFzc2lnbmFibGVQcm9wZXJ0aWVzICgpIHtcbiAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgIHsgbmFtZTogJ3RpbWVvdXQnLCB0eXBlOiBwb3NpdGl2ZUludGVnZXJPcHRpb24gfSxcbiAgICAgICAgICAgIHsgbmFtZTogJ2FsbG93VW5hd2FpdGVkUHJvbWlzZScsIHR5cGU6IGJvb2xlYW5PcHRpb24gfVxuICAgICAgICBdO1xuICAgIH1cbn1cbiJdfQ==
