'use strict';

exports.__esModule = true;
exports.setSpeedArgument = exports.booleanArgument = exports.positiveIntegerArgument = exports.integerArgument = undefined;
exports.actionRoleArgument = actionRoleArgument;
exports.actionOptions = actionOptions;
exports.nonEmptyStringArgument = nonEmptyStringArgument;
exports.nullableStringArgument = nullableStringArgument;
exports.urlArgument = urlArgument;
exports.stringOrStringArrayArgument = stringOrStringArrayArgument;
exports.resizeWindowDeviceArgument = resizeWindowDeviceArgument;
exports.screenshotPathArgument = screenshotPathArgument;

var _testcafeBrowserTools = require('testcafe-browser-tools');

var _markerSymbol = require('../../../role/marker-symbol');

var _markerSymbol2 = _interopRequireDefault(_markerSymbol);

var _factories = require('./factories');

var _testRun = require('../../../errors/test-run');

var _testPageUrl = require('../../../api/test-page-url');

var _checkFilePath = require('../../../utils/check-file-path');

var _checkFilePath2 = _interopRequireDefault(_checkFilePath);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

// Validators
const integerArgument = exports.integerArgument = (0, _factories.createIntegerValidator)(_testRun.ActionIntegerArgumentError);
const positiveIntegerArgument = exports.positiveIntegerArgument = (0, _factories.createPositiveIntegerValidator)(_testRun.ActionPositiveIntegerArgumentError);
const booleanArgument = exports.booleanArgument = (0, _factories.createBooleanValidator)(_testRun.ActionBooleanArgumentError);
const setSpeedArgument = exports.setSpeedArgument = (0, _factories.createSpeedValidator)(_testRun.SetTestSpeedArgumentError);

function actionRoleArgument(name, val) {
    if (!val || !val[_markerSymbol2.default]) throw new _testRun.ActionRoleArgumentError(name, typeof val);
}

function actionOptions(name, val) {
    const type = typeof val;

    if (type !== 'object' && val !== null && val !== void 0) throw new _testRun.ActionOptionsTypeError(type);
}

function nonEmptyStringArgument(argument, val, createError) {
    if (!createError) createError = actualValue => new _testRun.ActionStringArgumentError(argument, actualValue);

    const type = typeof val;

    if (type !== 'string') throw createError(type);

    if (!val.length) throw createError('""');
}

function nullableStringArgument(argument, val) {
    const type = typeof val;

    if (type !== 'string' && val !== null) throw new _testRun.ActionNullableStringArgumentError(argument, type);
}

function urlArgument(name, val) {
    nonEmptyStringArgument(name, val);

    (0, _testPageUrl.assertUrl)(val.trim(), 'navigateTo');
}

function stringOrStringArrayArgument(argument, val) {
    const type = typeof val;

    if (type === 'string') {
        if (!val.length) throw new _testRun.ActionStringOrStringArrayArgumentError(argument, '""');
    } else if (Array.isArray(val)) {
        if (!val.length) throw new _testRun.ActionStringOrStringArrayArgumentError(argument, '[]');

        const validateElement = elementIndex => nonEmptyStringArgument(argument, val[elementIndex], actualValue => new _testRun.ActionStringArrayElementError(argument, actualValue, elementIndex));

        for (let i = 0; i < val.length; i++) validateElement(i);
    } else throw new _testRun.ActionStringOrStringArrayArgumentError(argument, type);
}

function resizeWindowDeviceArgument(name, val) {
    nonEmptyStringArgument(name, val);

    if (!(0, _testcafeBrowserTools.isValidDeviceName)(val)) throw new _testRun.ActionUnsupportedDeviceTypeError(name, val);
}

function screenshotPathArgument(name, val) {
    nonEmptyStringArgument(name, val);

    const forbiddenCharsList = (0, _checkFilePath2.default)(val);

    if (forbiddenCharsList.length) throw new _testRun.ForbiddenCharactersInScreenshotPathError(val, forbiddenCharsList);
}
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3NyYy90ZXN0LXJ1bi9jb21tYW5kcy92YWxpZGF0aW9ucy9hcmd1bWVudC5qcyJdLCJuYW1lcyI6WyJhY3Rpb25Sb2xlQXJndW1lbnQiLCJhY3Rpb25PcHRpb25zIiwibm9uRW1wdHlTdHJpbmdBcmd1bWVudCIsIm51bGxhYmxlU3RyaW5nQXJndW1lbnQiLCJ1cmxBcmd1bWVudCIsInN0cmluZ09yU3RyaW5nQXJyYXlBcmd1bWVudCIsInJlc2l6ZVdpbmRvd0RldmljZUFyZ3VtZW50Iiwic2NyZWVuc2hvdFBhdGhBcmd1bWVudCIsImludGVnZXJBcmd1bWVudCIsInBvc2l0aXZlSW50ZWdlckFyZ3VtZW50IiwiYm9vbGVhbkFyZ3VtZW50Iiwic2V0U3BlZWRBcmd1bWVudCIsIm5hbWUiLCJ2YWwiLCJ0eXBlIiwiYXJndW1lbnQiLCJjcmVhdGVFcnJvciIsImFjdHVhbFZhbHVlIiwibGVuZ3RoIiwidHJpbSIsIkFycmF5IiwiaXNBcnJheSIsInZhbGlkYXRlRWxlbWVudCIsImVsZW1lbnRJbmRleCIsImkiLCJmb3JiaWRkZW5DaGFyc0xpc3QiXSwibWFwcGluZ3MiOiI7Ozs7UUFvQ2dCQSxrQixHQUFBQSxrQjtRQUtBQyxhLEdBQUFBLGE7UUFRQUMsc0IsR0FBQUEsc0I7UUFhQUMsc0IsR0FBQUEsc0I7UUFPQUMsVyxHQUFBQSxXO1FBTUFDLDJCLEdBQUFBLDJCO1FBMEJBQywwQixHQUFBQSwwQjtRQU9BQyxzQixHQUFBQSxzQjs7QUE1R2hCOztBQUNBOzs7O0FBRUE7O0FBT0E7O0FBZUE7O0FBQ0E7Ozs7OztBQUdBO0FBQ08sTUFBTUMsNENBQTBCLDJFQUFoQztBQUNBLE1BQU1DLDREQUEwQiwyRkFBaEM7QUFDQSxNQUFNQyw0Q0FBMEIsMkVBQWhDO0FBQ0EsTUFBTUMsOENBQTBCLHdFQUFoQzs7QUFHQSxTQUFTWCxrQkFBVCxDQUE2QlksSUFBN0IsRUFBbUNDLEdBQW5DLEVBQXdDO0FBQzNDLFFBQUksQ0FBQ0EsR0FBRCxJQUFRLENB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dGVudCI6WyJpbXBvcnQgeyBpc1ZhbGlkRGV2aWNlTmFtZSB9IGZyb20gJ3Rlc3RjYWZlLWJyb3dzZXItdG9vbHMnO1xuaW1wb3J0IHJvbGVNYXJrZXJTeW1ib2wgZnJvbSAnLi4vLi4vLi4vcm9sZS9tYXJrZXItc3ltYm9sJztcblxuaW1wb3J0IHtcbiAgICBjcmVhdGVCb29sZWFuVmFsaWRhdG9yLFxuICAgIGNyZWF0ZUludGVnZXJWYWxpZGF0b3IsXG4gICAgY3JlYXRlUG9zaXRpdmVJbnRlZ2VyVmFsaWRhdG9yLFxuICAgIGNyZWF0ZVNwZWVkVmFsaWRhdG9yXG59IGZyb20gJy4vZmFjdG9yaWVzJztcblxuaW1wb3J0IHtcbiAgICBBY3Rpb25PcHRpb25zVHlwZUVycm9yLFxuICAgIEFjdGlvbkJvb2xlYW5Bcmd1bWVudEVycm9yLFxuICAgIEFjdGlvblN0cmluZ0FyZ3VtZW50RXJyb3IsXG4gICAgQWN0aW9uTnVsbGFibGVTdHJpbmdBcmd1bWVudEVycm9yLFxuICAgIEFjdGlvbkludGVnZXJBcmd1bWVudEVycm9yLFxuICAgIEFjdGlvblJvbGVBcmd1bWVudEVycm9yLFxuICAgIEFjdGlvblBvc2l0aXZlSW50ZWdlckFyZ3VtZW50RXJyb3IsXG4gICAgQWN0aW9uU3RyaW5nT3JTdHJpbmdBcnJheUFyZ3VtZW50RXJyb3IsXG4gICAgQWN0aW9uU3RyaW5nQXJyYXlFbGVtZW50RXJyb3IsXG4gICAgQWN0aW9uVW5zdXBwb3J0ZWREZXZpY2VUeXBlRXJyb3IsXG4gICAgU2V0VGVzdFNwZWVkQXJndW1lbnRFcnJvcixcbiAgICBGb3JiaWRkZW5DaGFyYWN0ZXJzSW5TY3JlZW5zaG90UGF0aEVycm9yXG59IGZyb20gJy4uLy4uLy4uL2Vycm9ycy90ZXN0LXJ1bic7XG5cbmltcG9ydCB7IGFzc2VydFVybCB9IGZyb20gJy4uLy4uLy4uL2FwaS90ZXN0LXBhZ2UtdXJsJztcbmltcG9ydCBjaGVja0ZpbGVQYXRoIGZyb20gJy4uLy4uLy4uL3V0aWxzL2NoZWNrLWZpbGUtcGF0aCc7XG5cblxuLy8gVmFsaWRhdG9yc1xuZXhwb3J0IGNvbnN0IGludGVnZXJBcmd1bWVudCAgICAgICAgID0gY3JlYXRlSW50ZWdlclZhbGlkYXRvcihBY3Rpb25JbnRlZ2VyQXJndW1lbnRFcnJvcik7XG5leHBvcnQgY29uc3QgcG9zaXRpdmVJbnRlZ2VyQXJndW1lbnQgPSBjcmVhdGVQb3NpdGl2ZUludGVnZXJWYWxpZGF0b3IoQWN0aW9uUG9zaXRpdmVJbnRlZ2VyQXJndW1lbnRFcnJvcik7XG5leHBvcnQgY29uc3QgYm9vbGVhbkFyZ3VtZW50ICAgICAgICAgPSBjcmVhdGVCb29sZWFuVmFsaWRhdG9yKEFjdGlvbkJvb2xlYW5Bcmd1bWVudEVycm9yKTtcbmV4cG9ydCBjb25zdCBzZXRTcGVlZEFyZ3VtZW50ICAgICAgICA9IGNyZWF0ZVNwZWVkVmFsaWRhdG9yKFNldFRlc3RTcGVlZEFyZ3VtZW50RXJyb3IpO1xuXG5cbmV4cG9ydCBmdW5jdGlvbiBhY3Rpb25Sb2xlQXJndW1lbnQgKG5hbWUsIHZhbCkge1xuICAgIGlmICghdmFsIHx8ICF2YWxbcm9sZU1hcmtlclN5bWJvbF0pXG4gICAgICAgIHRocm93IG5ldyBBY3Rpb25Sb2xlQXJndW1lbnRFcnJvcihuYW1lLCB0eXBlb2YgdmFsKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGFjdGlvbk9wdGlvbnMgKG5hbWUsIHZhbCkge1xuICAgIGNvbnN0IHR5cGUgPSB0eXBlb2YgdmFsO1xuXG4gICAgaWYgKHR5cGUgIT09ICdvYmplY3QnICYmIHZhbCAhPT0gbnVsbCAmJiB2YWwgIT09IHZvaWQgMClcbiAgICAgICAgdGhyb3cgbmV3IEFjdGlvbk9wdGlvbnNUeXBlRXJyb3IodHlwZSk7XG59XG5cblxuZXhwb3J0IGZ1bmN0aW9uIG5vbkVtcHR5U3RyaW5nQXJndW1lbnQgKGFyZ3VtZW50LCB2YWwsIGNyZWF0ZUVycm9yKSB7XG4gICAgaWYgKCFjcmVhdGVFcnJvcilcbiAgICAgICAgY3JlYXRlRXJyb3IgPSBhY3R1YWxWYWx1ZSA9PiBuZXcgQWN0aW9uU3RyaW5nQXJndW1lbnRFcnJvcihhcmd1bWVudCwgYWN0dWFsVmFsdWUpO1xuXG4gICAgY29uc3QgdHlwZSA9IHR5cGVvZiB2YWw7XG5cbiAgICBpZiAodHlwZSAhPT0gJ3N0cmluZycpXG4gICAgICAgIHRocm93IGNyZWF0ZUVycm9yKHR5cGUpO1xuXG4gICAgaWYgKCF2YWwubGVuZ3RoKVxuICAgICAgICB0aHJvdyBjcmVhdGVFcnJvcignXCJcIicpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gbnVsbGFibGVTdHJpbmdBcmd1bWVudCAoYXJndW1lbnQsIHZhbCkge1xuICAgIGNvbnN0IHR5cGUgPSB0eXBlb2YgdmFsO1xuXG4gICAgaWYgKHR5cGUgIT09ICdzdHJpbmcnICYmIHZhbCAhPT0gbnVsbClcbiAgICAgICAgdGhyb3cgbmV3IEFjdGlvbk51bGxhYmxlU3RyaW5nQXJndW1lbnRFcnJvcihhcmd1bWVudCwgdHlwZSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1cmxBcmd1bWVudCAobmFtZSwgdmFsKSB7XG4gICAgbm9uRW1wdHlTdHJpbmdBcmd1bWVudChuYW1lLCB2YWwpO1xuXG4gICAgYXNzZXJ0VXJsKHZhbC50cmltKCksICduYXZpZ2F0ZVRvJyk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzdHJpbmdPclN0cmluZ0FycmF5QXJndW1lbnQgKGFyZ3VtZW50LCB2YWwpIHtcbiAgICBjb25zdCB0eXBlID0gdHlwZW9mIHZhbDtcblxuICAgIGlmICh0eXBlID09PSAnc3RyaW5nJykge1xuICAgICAgICBpZiAoIXZhbC5sZW5ndGgpXG4gICAgICAgICAgICB0aHJvdyBuZXcgQWN0aW9uU3RyaW5nT3JTdHJpbmdBcnJheUFyZ3VtZW50RXJyb3IoYXJndW1lbnQsICdcIlwiJyk7XG4gICAgfVxuXG4gICAgZWxzZSBpZiAoQXJyYXkuaXNBcnJheSh2YWwpKSB7XG4gICAgICAgIGlmICghdmFsLmxlbmd0aClcbiAgICAgICAgICAgIHRocm93IG5ldyBBY3Rpb25TdHJpbmdPclN0cmluZ0FycmF5QXJndW1lbnRFcnJvcihhcmd1bWVudCwgJ1tdJyk7XG5cbiAgICAgICAgY29uc3QgdmFsaWRhdGVFbGVtZW50ID0gZWxlbWVudEluZGV4ID0+IG5vbkVtcHR5U3RyaW5nQXJndW1lbnQoXG4gICAgICAgICAgICBhcmd1bWVudCxcbiAgICAgICAgICAgIHZhbFtlbGVtZW50SW5kZXhdLFxuICAgICAgICAgICAgYWN0dWFsVmFsdWUgPT4gbmV3IEFjdGlvblN0cmluZ0FycmF5RWxlbWVudEVycm9yKGFyZ3VtZW50LCBhY3R1YWxWYWx1ZSwgZWxlbWVudEluZGV4KVxuICAgICAgICApO1xuXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdmFsLmxlbmd0aDsgaSsrKVxuICAgICAgICAgICAgdmFsaWRhdGVFbGVtZW50KGkpO1xuICAgIH1cblxuICAgIGVsc2VcbiAgICAgICAgdGhyb3cgbmV3IEFjdGlvblN0cmluZ09yU3RyaW5nQXJyYXlBcmd1bWVudEVycm9yKGFyZ3VtZW50LCB0eXBlKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJlc2l6ZVdpbmRvd0RldmljZUFyZ3VtZW50IChuYW1lLCB2YWwpIHtcbiAgICBub25FbXB0eVN0cmluZ0FyZ3VtZW50KG5hbWUsIHZhbCk7XG5cbiAgICBpZiAoIWlzVmFsaWREZXZpY2VOYW1lKHZhbCkpXG4gICAgICAgIHRocm93IG5ldyBBY3Rpb25VbnN1cHBvcnRlZERldmljZVR5cGVFcnJvcihuYW1lLCB2YWwpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc2NyZWVuc2hvdFBhdGhBcmd1bWVudCAobmFtZSwgdmFsKSB7XG4gICAgbm9uRW1wdHlTdHJpbmdBcmd1bWVudChuYW1lLCB2YWwpO1xuXG4gICAgY29uc3QgZm9yYmlkZGVuQ2hhcnNMaXN0ID0gY2hlY2tGaWxlUGF0aCh2YWwpO1xuXG4gICAgaWYgKGZvcmJpZGRlbkNoYXJzTGlzdC5sZW5ndGgpXG4gICAgICAgIHRocm93IG5ldyBGb3JiaWRkZW5DaGFyYWN0ZXJzSW5TY3JlZW5zaG90UGF0aEVycm9yKHZhbCwgZm9yYmlkZGVuQ2hhcnNMaXN0KTtcbn1cbiJdfQ==
